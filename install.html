<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>CaptainHook Documentation</title>

    <link rel="icon" type="image/png" href="gfx/favicon.png">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/layout.css" rel="stylesheet">
    <link href="css/darcula.css" rel="stylesheet">

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://github.com/captainhook-git/captainhook">
            <div class="logo-plus-title"><img src="gfx/captainhook.png" alt="CaptainHook" width="55" /> Captainhook</div>
          </a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="index.html">Home</a></li>
            <li class="active"><a href="install.html">Install</a></li>
            <li><a href="configure.html">Configure</a></li>
            <li><a href="hooks.html">Hooks</a></li>
            <li><a href="extend.html">Extend</a></li>
            <li><a href="https://shop.spreadshirt.de/captainhookphp/">Merch</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container theme-showcase" role="main">

      <a id="installation"></a>
      <h1>Installation</h1>
      <h4>Using the PHAR release</h4>
      <p>
        The easiest way to install <em>CaptainHook</em> is by using the PHAR file and install it using <a href="https://phar.io">PHIVE</a>.
        You can also download the PHAR manually from the <em>CaptainHook</em> <a href="https://github.com/captainhook-git/captainhook/releases/latest">release page</a>.
      </p>
      <pre><code class="bash">$ phive install captainhook</code></pre>
      <h4>Install using Composer</h4>
      <p>
        Installing <em>CaptainHook</em> via composer is also supported.
        You can choose between installing the PHAR or the source code with all its dependencies.
      </p>
      <pre><code class="bash">$ composer require --dev captainhook/captainhook-phar</code></pre>
      <pre><code class="bash">$ composer require --dev captainhook/captainhook</code></pre>
      <p>
        This will install the `captainhook` executable usually located under
        <em class="hl">vendor/bin/captainhook</em>.
      </p>
      <h2>Setup</h2>
      <p>
        The next step is to create a configuration file, to define the actions you want to execute for
        each git hook. You can either use a sample configuration from the documentation or create one by running
        the following command. Be aware, that if you changed your composer bin directory or use the PHAR,
        you must adjust the path.
      </p>
      <pre><code class="bash">$ vendor/bin/captainhook configure</code></pre>
      <p>
        While executing this, <em>CaptainHook</em> will ask you a series of questions to create a valid configuration
        file for you.
      </p>
      <p>
        After creating the configuration file, there is only one step left to finish the installation.
        You must activate the hooks in your local git repository. To do so, just run the following command.
      </p>
      <pre><code class="bash">$ vendor/bin/captainhook install</code></pre>
      <p>
        Executing this will create the hook script located in your <em class="hl">.git/hooks</em> directory, for each hook
        you choose to install while running the command. So now every time git triggers a hook,
        <em>CaptainHook</em> gets executed.
      </p>
      <p class="pirate">
        AYE! Ye have successfully installed <em>CaptainHook</em> to handle yer git hooks. Want to know how to set sail?
        Have a closer look at thee <a href="configure.html">configuration file</a> to set up yer git hooks.
      </p>

      <p>
        There are more options to further integrate <em>CaptainHook</em> with Composer. For details check the
        <a href="composer.html">Composer integration</a> page.
      </p>

      <a id="docker"></a>
      <h2>Using Docker</h2>
      <p>
        If you don't have PHP installed locally, or you have installed a different version, you can use Docker to
        execute CaptainHook. To do so you must install the hooks a bit differently.
      </p>
      <pre><code class="bash">$ vendor/bin/captainhook install --run-mode=docker --run-exec="docker exec -i CONTAINER_NAME"</code></pre>
      <p>
        You can choose your preferred docker command e.g.:
      </p>
      <ul>
        <li>docker exec -i MY_CONTAINER_NAME</li>
        <li>docker run --rm -v $(pwd):/var/www/html MY_IMAGE_NAME</li>
        <li>docker-compose -f docker/docker-compose.yml run --rm -T MY_SERVICE_NAME</li>
      </ul>
      <p>
        If you are using the composer plugin or just don't want to provide the settings via cli option you can
        configure the settings in the "config" section of your <em>captainhook.json</em>.
      </p>
      <pre><code class="javascript">{
  "config": {
    "run": {
      "mode": "docker",
      "exec": "docker exec -i CONTAINER_NAME"
    }
  }
  "pre-commit": {
    ...
  }
}</code></pre>
      <p>
        Another optimization you could to is to only install hooks that are enabled in your configuration. This way git
        will not trigger the creation of a Docker container just to output that the hook is disabled. To make sure you
        only install enabled hooks use the corresponding flag during installation.
      </p>
      <pre><code class="bash">$ vendor/bin/captainhook install --only-enabled --run-mode=docker --run-exec="docker exec -i CONTAINER_NAME"</code></pre>

      <h2>A word of warning</h2>
      <p class="pirate">
        Don't ye forget it is still possible to commit without invoking thee hooks. Make sure ye run
        appropriate backend-sanity checks on yer code, so yer hearties don't break anything AYE!!!
      </p>

    </div>

    <footer class="footer">
      <div class="container">
        <p>
          Found a typo or a bug?
          Please open an <a href="https://github.com/captainhook-git/captainhook/issues">issue</a>
          or pull request for the <em>gh-pages</em>
          branch of <a href="https://github.com/captainhook-git/captainhook/tree/gh-pages">CaptainHook</a>
        </p>
        <p>
          &copy; <a href="https://github.com/sebastianfeldmann">Sebastian Feldmann</a>
        </p>
      </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
